@page "/journals/create"
@using MudBlazor

<MudGrid>
    <MudItem xs="12">
        <MudText Typo="Typo.h4" Class="mb-2">@(_isEditMode ? "Edit Journal Entry" : "Create Journal Entry")</MudText>
        <MudText Typo="Typo.body2" Color="Color.Default">
            @DateTime.Today.ToString("dddd, MMMM dd, yyyy")
        </MudText>
    </MudItem>
</MudGrid>

<MudGrid Class="mt-4">
    <MudItem xs="12" md="8">
        <MudPaper Class="pa-4" Elevation="2">
            <MudForm @ref="_form" @bind-IsValid="@_formValid">
                <!-- Title -->
                <MudTextField @bind-Value="_title"
                              Label="Title"
                              Variant="Variant.Outlined"
                              Required="true"
                              RequiredError="Title is required"
                              Class="mb-4"
                              HelperText="Give your entry a meaningful title" />

                <!-- Content -->
                <MudTextField @bind-Value="_content"
                              Label="Content"
                              Variant="Variant.Outlined"
                              Lines="12"
                              Required="true"
                              RequiredError="Content is required"
                              Class="mb-4"
                              HelperText="Write your thoughts, experiences, or reflections" />

                <!-- Primary Mood -->
                <MudSelect @bind-Value="_primaryMood"
                           Label="Primary Mood"
                           Variant="Variant.Outlined"
                           Required="true"
                           RequiredError="Please select your primary mood"
                           Class="mb-4"
                           AnchorOrigin="Origin.BottomCenter">
                    <MudSelectItem Value="@("")" Disabled="true">-- Select Mood --</MudSelectItem>
                    <MudText Typo="Typo.caption" Class="px-4 pt-2" Style="color: var(--mud-palette-success);">Positive</MudText>
                    @foreach (var mood in _positiveMoods)
                    {
                        <MudSelectItem Value="@mood">@mood</MudSelectItem>
                    }
                    <MudDivider Class="my-2" />
                    <MudText Typo="Typo.caption" Class="px-4" Style="color: var(--mud-palette-text-secondary);">Neutral</MudText>
                    @foreach (var mood in _neutralMoods)
                    {
                        <MudSelectItem Value="@mood">@mood</MudSelectItem>
                    }
                    <MudDivider Class="my-2" />
                    <MudText Typo="Typo.caption" Class="px-4" Style="color: var(--mud-palette-error);">Negative</MudText>
                    @foreach (var mood in _negativeMoods)
                    {
                        <MudSelectItem Value="@mood">@mood</MudSelectItem>
                    }
                </MudSelect>

                <!-- Secondary Moods -->
                <MudSelect @bind-Value="_secondaryMood1"
                           Label="Secondary Mood 1 (Optional)"
                           Variant="Variant.Outlined"
                           Clearable="true"
                           Class="mb-4"
                           AnchorOrigin="Origin.BottomCenter">
                    @foreach (var mood in _allMoods)
                    {
                        <MudSelectItem Value="@mood">@mood</MudSelectItem>
                    }
                </MudSelect>

    <MudStack Row="true" Spacing="2" Class="mt-4">
        <MudButton Color="Color.Primary"
                   Variant="Variant.Filled">
            Save
        </MudButton>

        <MudButton Variant="Variant.Outlined"
                   Href="/journals">
            Cancel
        </MudButton>
    </MudStack>

</MudPaper>

        <!-- Available Tags -->
        <MudPaper Class="pa-4" Elevation="2">
            <MudText Typo="Typo.h6" Class="mb-3">Popular Tags</MudText>
            <div class="d-flex flex-wrap gap-1">
                @foreach (var tag in _preBuiltTags.Take(12))
                {
                    <MudChip T="string" Size="Size.Small"
                             Variant="Variant.Outlined"
                             OnClick="@(() => QuickAddTag(tag))">
                        @tag
                    </MudChip>
                }
            </div>
        </MudPaper>
    </MudItem>
</MudGrid>
>>>>>>> Stashed changes

@code {
    [Inject] NavigationManager NavigationManager { get; set; }
    [Inject] ISnackbar Snackbar { get; set; }

    [Parameter]
    [SupplyParameterFromQuery(Name = "title")]
    public string ExistingTitle { get; set; }

    MudForm _form;
    bool _formValid;
    bool _isEditMode = false;
    bool _isSaving = false;

    string _title = "";
    string _content = "";
    string _primaryMood = "";
    string _secondaryMood1 = "";
    string _secondaryMood2 = "";
    string _currentTag = "";
    List<string> _selectedTags = new();

    string Title;
    string Content;
    string PrimaryMood;
    HashSet<string> SelectedTags = new();

    List<string> Moods = new()
    {
        "Happy","Excited","Calm","Sad","Angry","Stressed"
    };

    List<string> Tags = new()
    {
        "Work","Health","Travel","Family","Fitness","Study"
    };
}
